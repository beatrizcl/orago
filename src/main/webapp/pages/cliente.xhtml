<!DOCTYPE html>
<ui:composition template="/WEB-INF/templates/template2.xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<meta charset="UTF-8"></meta>
	<title>Cadastro de Clientes</title>
	
	
</h:head>
<ui:define name="corpo">

<p:messages id="msg" showDetail="true" closable="true" showSummary="true" />

	<p:panel header="Clientes cadastrados">
		<p:commandButton value="Cadastrar novo cliente" type="button" onclick="PF('popupclientecadastra').show();" />
	
		<p:dialog header="Cadastrando novo cliente" widgetVar="popupclientecadastra" modal="true" closable="no" draggable="no" appendTo="@(body)">
			<h:form id="frmCadastro">
				<h:panelGrid columns="2" id="cad">
				
					<p:outputLabel for="txtNome" value="Nome: "/>
					<p:inputText id="txtNome" value="#{clienteBack.domain.nmcliente}" required="true" requiredMessage="Nome obrigatório"/>
					
					<p:outputLabel for="txtCpf" value="CPF/CNPJ: "/>
					<p:inputText id="txtCpf" value="#{clienteBack.domain.cpfcliente}" required="true" requiredMessage="CPF obrigatória"/>
					
					<p:outputLabel for="txtCep" value="CEP: "/>
					<p:inputText id="txtCep" value="#{clienteBack.domain.cepcliente}" required="true" requiredMessage="CEP obrigatória"/>
				
					<p:outputLabel for="txtCid" value="Cidade: "/>
					<p:inputText id="txtCid" value="#{clienteBack.domain.cidadecliente}" required="true" requiredMessage="Cidade obrigatória"/>				
				
					<p:outputLabel for="txtBairro" value="Bairro: "/>
					<p:inputText id="txtBairro" value="#{clienteBack.domain.bairrocliente}" required="true" requiredMessage="Bairro obrigatório"/>
					
					<p:outputLabel for="txtUf" value="UF: "/>
					<p:inputText id="txtUf" value="#{clienteBack.domain.ufcliente}" required="true" requiredMessage="uf obrigatória"/>
					
					<p:outputLabel for="txtFone" value="Telefone: "/>
					<p:inputText id="txtFone" value="#{clienteBack.domain.telefonecliente}" required="true" requiredMessage="Telefone obrigatório"/>
					
					<p:outputLabel for="txtEmail" value="Email: "/>
					<p:inputText id="txtEmail" value="#{clienteBack.domain.emailcliente}" required="true" requiredMessage="Email obrigatório"/>
					
					<p:commandButton value="Cadastrar" actionListener="#{clienteBack.cadastra}" update="frmTblCliente:tblCliente" onclick="PF('popupclientecadastra').hide();" />
					<p:commandButton value="Cancelar" type="button" onclick="PF('popupclientecadastra').hide();" />
			
				</h:panelGrid>
			</h:form>
		</p:dialog>
		
		<p:dialog header="Editar cliente" widgetVar="popupclienteedita" modal="true" closable="no" draggable="no" appendTo="@(body)">
			<h:form id="frmEdita">
				<h:panelGrid columns="2" id="cad">
				
					<p:outputLabel for="txtNome" value="Nome: "/>
					<p:inputText id="txtNome" value="#{clienteBack.domain.nmcliente}" required="true" requiredMessage="Nome obrigatório"/>
					
					<p:outputLabel for="txtCpf" value="CPF/CNPJ: "/>
					<p:inputText id="txtCpf" value="#{clienteBack.domain.cpfcliente}" required="true" requiredMessage="CPF obrigatória"/>
					
					<p:outputLabel for="txtCep" value="CEP: "/>
					<p:inputText id="txtCep" value="#{clienteBack.domain.cepcliente}" required="true" requiredMessage="CEP obrigatória"/>
				
					<p:outputLabel for="txtCid" value="Cidade: "/>
					<p:inputText id="txtCid" value="#{clienteBack.domain.cidadecliente}" required="true" requiredMessage="Cidade obrigatória"/>				
				
					<p:outputLabel for="txtBairro" value="Bairro: "/>
					<p:inputText id="txtBairro" value="#{clienteBack.domain.bairrocliente}" required="true" requiredMessage="Bairro obrigatório"/>
			
					
					<p:outputLabel for="txtUf" value="UF: "/>
					<p:inputText id="txtUf" value="#{clienteBack.domain.ufcliente}" required="true" requiredMessage="uf obrigatória"/>
					
					<p:outputLabel for="txtFone" value="Telefone: "/>
					<p:inputText id="txtFone" value="#{clienteBack.domain.telefonecliente}" required="true" requiredMessage="Telefone obrigatório"/>
					
					<p:outputLabel for="txtEmail" value="Email: "/>
					<p:inputText id="txtEmail" value="#{clienteBack.domain.emailcliente}" required="true" requiredMessage="Email obrigatório"/>
					
					
					<p:commandButton value="Salvar" actionListener="#{clienteBack.edita}" update="msg frmTblCliente" onclick="PF('popupclienteedita').hide();" />
					<p:commandButton value="Cancelar" type="button" onclick="PF('popupclienteedita').hide();" />
			
				</h:panelGrid>
			</h:form>
		</p:dialog>
	</p:panel>
	
	
	<h:form id="frmTblCliente">
		<p:dataTable id="tblCliente" var="cli" value="#{clienteBack.clienteList}" emptyMessage="Não há dados!" reflow="true" >
			
			<p:column headerText="Nome" sortBy="#{cli.nmcliente}">
        		<h:outputText value="#{cli.nmcliente}" />
        	</p:column>
        	
			<p:column headerText="CPF/CNPJ" sortBy="#{cli.cpfcliente}">
        		<h:outputText value="#{cli.cpfcliente}" />
        	</p:column>
        	
        	<p:column headerText="Telefone">
        		<h:outputText value="#{cli.telefonecliente}" />
        	</p:column>
        	
        	<p:column headerText="Cep" sortBy="#{cli.cepcliente}">
        		<h:outputText value="#{cli.cidadecliente}" />
        	</p:column>
        	
        	<p:column headerText="Cidade" sortBy="#{cli.cidadecliente}">
        		<h:outputText value="#{cli.cidadecliente}" />
        	</p:column>
        	
        	<p:column headerText="UF" sortBy="#{cli.ufcliente}">
        		<h:outputText value="#{cli.ufcliente}" />
        	</p:column>
        	
        	<p:column headerText="E-mail" sortBy="#{cli.emailcliente}">
        		<h:outputText value="#{cli.emailcliente}" />
        	</p:column>
        	
        	
        	<p:column headerText="Operações">
        		<p:commandButton icon="ui-icon-pencil" actionListener="#{clienteBack.preEdita}" onclick="PF('popupclienteedita').show();">
        			<f:attribute name="clienteEdita" value="#{cli}" />
        		</p:commandButton>
        		
        		<p:commandButton icon="ui-icon-trash" actionListener="#{clienteBack.excluir}" update="frmTblCliente">
        			<p:confirm header="Confirmação" message="Excluir o cliente selecionado?" icon="ui-icon-alert"></p:confirm>
        			<f:attribute name="clienteEdita" value="#{cli}" />
        		</p:commandButton>
        	</p:column>
        	
		</p:dataTable>
		
		<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
			<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" update="frmTblCliente" />
			<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
			
		</p:confirmDialog>
		
		</h:form>
</ui:define>
</ui:composition>